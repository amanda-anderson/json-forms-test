{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCombinedErrorMessage = exports.defaultErrorTranslator = exports.defaultTranslator = exports.getI18nKey = exports.getI18nKeyPrefix = exports.transformPathToI18nPrefix = exports.getI18nKeyPrefixBySchema = void 0;\n\nvar reducers_1 = require(\"../reducers\");\n\nvar util_1 = require(\"../util\");\n\nvar getI18nKeyPrefixBySchema = function getI18nKeyPrefixBySchema(schema, uischema) {\n  var _a, _b, _c;\n\n  return (_c = (_b = (_a = uischema === null || uischema === void 0 ? void 0 : uischema.options) === null || _a === void 0 ? void 0 : _a.i18n) !== null && _b !== void 0 ? _b : schema === null || schema === void 0 ? void 0 : schema.i18n) !== null && _c !== void 0 ? _c : undefined;\n};\n\nexports.getI18nKeyPrefixBySchema = getI18nKeyPrefixBySchema;\n/**\n * Transforms a given path to a prefix which can be used for i18n keys.\n * Returns 'root' for empty paths and removes array indices\n */\n\nvar transformPathToI18nPrefix = function transformPathToI18nPrefix(path) {\n  return (path === null || path === void 0 ? void 0 : path.split('.').filter(function (segment) {\n    return !/^\\d+$/.test(segment);\n  }).join('.')) || 'root';\n};\n\nexports.transformPathToI18nPrefix = transformPathToI18nPrefix;\n\nvar getI18nKeyPrefix = function getI18nKeyPrefix(schema, uischema, path) {\n  var _a;\n\n  return (_a = exports.getI18nKeyPrefixBySchema(schema, uischema)) !== null && _a !== void 0 ? _a : exports.transformPathToI18nPrefix(path);\n};\n\nexports.getI18nKeyPrefix = getI18nKeyPrefix;\n\nvar getI18nKey = function getI18nKey(schema, uischema, path, key) {\n  return exports.getI18nKeyPrefix(schema, uischema, path) + \".\" + key;\n};\n\nexports.getI18nKey = getI18nKey;\n\nvar defaultTranslator = function defaultTranslator(_id, defaultMessage) {\n  return defaultMessage;\n};\n\nexports.defaultTranslator = defaultTranslator;\n\nvar defaultErrorTranslator = function defaultErrorTranslator(error, t, uischema) {\n  var _a; // check whether there is a special keyword message\n\n\n  var i18nKey = exports.getI18nKey(error.parentSchema, uischema, reducers_1.getControlPath(error), \"error.\" + error.keyword);\n  var specializedKeywordMessage = t(i18nKey, undefined);\n\n  if (specializedKeywordMessage !== undefined) {\n    return specializedKeywordMessage;\n  } // check whether there is a generic keyword message\n\n\n  var genericKeywordMessage = t(\"error.\" + error.keyword, undefined);\n\n  if (genericKeywordMessage !== undefined) {\n    return genericKeywordMessage;\n  } // check whether there is a customization for the default message\n\n\n  var messageCustomization = t(error.message, undefined);\n\n  if (messageCustomization !== undefined) {\n    return messageCustomization;\n  } // rewrite required property messages (if they were not customized) as we place them next to the respective input\n\n\n  if (error.keyword === 'required' && ((_a = error.message) === null || _a === void 0 ? void 0 : _a.startsWith('must have required property'))) {\n    return t('is a required property', 'is a required property');\n  }\n\n  return error.message;\n};\n\nexports.defaultErrorTranslator = defaultErrorTranslator;\n/**\n * Returns the determined error message for the given errors.\n * All errors must correspond to the given schema, uischema or path.\n */\n\nvar getCombinedErrorMessage = function getCombinedErrorMessage(errors, et, t, schema, uischema, path) {\n  if (errors.length > 0 && t) {\n    // check whether there is a special message which overwrites all others\n    var customErrorKey = exports.getI18nKey(schema, uischema, path, 'error.custom');\n    var specializedErrorMessage = t(customErrorKey, undefined);\n\n    if (specializedErrorMessage !== undefined) {\n      return specializedErrorMessage;\n    }\n  }\n\n  return util_1.formatErrorMessage(errors.map(function (error) {\n    return et(error, t, uischema);\n  }));\n};\n\nexports.getCombinedErrorMessage = getCombinedErrorMessage;","map":{"version":3,"sources":["../../src/i18n/i18nUtil.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getCombinedErrorMessage = exports.defaultErrorTranslator = exports.defaultTranslator = exports.getI18nKey = exports.getI18nKeyPrefix = exports.transformPathToI18nPrefix = exports.getI18nKeyPrefixBySchema = void 0;\nvar reducers_1 = require(\"../reducers\");\nvar util_1 = require(\"../util\");\nvar getI18nKeyPrefixBySchema = function (schema, uischema) {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = uischema === null || uischema === void 0 ? void 0 : uischema.options) === null || _a === void 0 ? void 0 : _a.i18n) !== null && _b !== void 0 ? _b : schema === null || schema === void 0 ? void 0 : schema.i18n) !== null && _c !== void 0 ? _c : undefined;\n};\nexports.getI18nKeyPrefixBySchema = getI18nKeyPrefixBySchema;\n/**\n * Transforms a given path to a prefix which can be used for i18n keys.\n * Returns 'root' for empty paths and removes array indices\n */\nvar transformPathToI18nPrefix = function (path) {\n    return ((path === null || path === void 0 ? void 0 : path.split('.').filter(function (segment) { return !/^\\d+$/.test(segment); }).join('.')) || 'root');\n};\nexports.transformPathToI18nPrefix = transformPathToI18nPrefix;\nvar getI18nKeyPrefix = function (schema, uischema, path) {\n    var _a;\n    return ((_a = exports.getI18nKeyPrefixBySchema(schema, uischema)) !== null && _a !== void 0 ? _a : exports.transformPathToI18nPrefix(path));\n};\nexports.getI18nKeyPrefix = getI18nKeyPrefix;\nvar getI18nKey = function (schema, uischema, path, key) {\n    return exports.getI18nKeyPrefix(schema, uischema, path) + \".\" + key;\n};\nexports.getI18nKey = getI18nKey;\nvar defaultTranslator = function (_id, defaultMessage) { return defaultMessage; };\nexports.defaultTranslator = defaultTranslator;\nvar defaultErrorTranslator = function (error, t, uischema) {\n    var _a;\n    // check whether there is a special keyword message\n    var i18nKey = exports.getI18nKey(error.parentSchema, uischema, reducers_1.getControlPath(error), \"error.\" + error.keyword);\n    var specializedKeywordMessage = t(i18nKey, undefined);\n    if (specializedKeywordMessage !== undefined) {\n        return specializedKeywordMessage;\n    }\n    // check whether there is a generic keyword message\n    var genericKeywordMessage = t(\"error.\" + error.keyword, undefined);\n    if (genericKeywordMessage !== undefined) {\n        return genericKeywordMessage;\n    }\n    // check whether there is a customization for the default message\n    var messageCustomization = t(error.message, undefined);\n    if (messageCustomization !== undefined) {\n        return messageCustomization;\n    }\n    // rewrite required property messages (if they were not customized) as we place them next to the respective input\n    if (error.keyword === 'required' && ((_a = error.message) === null || _a === void 0 ? void 0 : _a.startsWith('must have required property'))) {\n        return t('is a required property', 'is a required property');\n    }\n    return error.message;\n};\nexports.defaultErrorTranslator = defaultErrorTranslator;\n/**\n * Returns the determined error message for the given errors.\n * All errors must correspond to the given schema, uischema or path.\n */\nvar getCombinedErrorMessage = function (errors, et, t, schema, uischema, path) {\n    if (errors.length > 0 && t) {\n        // check whether there is a special message which overwrites all others\n        var customErrorKey = exports.getI18nKey(schema, uischema, path, 'error.custom');\n        var specializedErrorMessage = t(customErrorKey, undefined);\n        if (specializedErrorMessage !== undefined) {\n            return specializedErrorMessage;\n        }\n    }\n    return util_1.formatErrorMessage(errors.map(function (error) { return et(error, t, uischema); }));\n};\nexports.getCombinedErrorMessage = getCombinedErrorMessage;\n//# sourceMappingURL=i18nUtil.js.map"]},"metadata":{},"sourceType":"script"}
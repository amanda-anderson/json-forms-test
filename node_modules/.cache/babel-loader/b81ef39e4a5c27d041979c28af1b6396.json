{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"/home/aander-cl/Documents/jsonforms/jsonforms-react-seed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _taggedTemplateLiteral = require(\"/home/aander-cl/Documents/jsonforms/jsonforms-react-seed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/taggedTemplateLiteral\");\n\nfunction _templateObject15() {\n  var data = _taggedTemplateLiteral([\"\", \" || \", \"\"]);\n\n  _templateObject15 = function _templateObject15() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject14() {\n  var data = _taggedTemplateLiteral([\"\", \".length\"]);\n\n  _templateObject14 = function _templateObject14() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"\", \"(\", \", \", \")\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"new RegExp\"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\", \"(\", \")\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\", \".call(\", \", \", \")\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\", \", \", \"\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\", \", \", \", \", \"\", \"\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\", \"\", \" === undefined\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\", \" && \", \"\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\", \"\", \" !== undefined\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\", \".call(\", \", \", \")\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"Object.prototype.hasOwnProperty\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\", \" = \", \"\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateUnion = exports.validateArray = exports.usePattern = exports.callValidateCode = exports.schemaProperties = exports.allSchemaProperties = exports.noPropertyInData = exports.propertyInData = exports.isOwnProperty = exports.hasPropFunc = exports.reportMissingProp = exports.checkMissingProp = exports.checkReportMissingProp = void 0;\n\nvar codegen_1 = require(\"../compile/codegen\");\n\nvar util_1 = require(\"../compile/util\");\n\nvar names_1 = require(\"../compile/names\");\n\nvar util_2 = require(\"../compile/util\");\n\nfunction checkReportMissingProp(cxt, prop) {\n  var gen = cxt.gen,\n      data = cxt.data,\n      it = cxt.it;\n  gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), function () {\n    cxt.setParams({\n      missingProperty: (0, codegen_1._)(_templateObject(), prop)\n    }, true);\n    cxt.error();\n  });\n}\n\nexports.checkReportMissingProp = checkReportMissingProp;\n\nfunction checkMissingProp(_ref, properties, missing) {\n  var gen = _ref.gen,\n      data = _ref.data,\n      opts = _ref.it.opts;\n  return (0, codegen_1.or).apply(void 0, _toConsumableArray(properties.map(function (prop) {\n    return (0, codegen_1.and)(noPropertyInData(gen, data, prop, opts.ownProperties), (0, codegen_1._)(_templateObject2(), missing, prop));\n  })));\n}\n\nexports.checkMissingProp = checkMissingProp;\n\nfunction reportMissingProp(cxt, missing) {\n  cxt.setParams({\n    missingProperty: missing\n  }, true);\n  cxt.error();\n}\n\nexports.reportMissingProp = reportMissingProp;\n\nfunction hasPropFunc(gen) {\n  return gen.scopeValue(\"func\", {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    ref: Object.prototype.hasOwnProperty,\n    code: (0, codegen_1._)(_templateObject3())\n  });\n}\n\nexports.hasPropFunc = hasPropFunc;\n\nfunction isOwnProperty(gen, data, property) {\n  return (0, codegen_1._)(_templateObject4(), hasPropFunc(gen), data, property);\n}\n\nexports.isOwnProperty = isOwnProperty;\n\nfunction propertyInData(gen, data, property, ownProperties) {\n  var cond = (0, codegen_1._)(_templateObject5(), data, (0, codegen_1.getProperty)(property));\n  return ownProperties ? (0, codegen_1._)(_templateObject6(), cond, isOwnProperty(gen, data, property)) : cond;\n}\n\nexports.propertyInData = propertyInData;\n\nfunction noPropertyInData(gen, data, property, ownProperties) {\n  var cond = (0, codegen_1._)(_templateObject7(), data, (0, codegen_1.getProperty)(property));\n  return ownProperties ? (0, codegen_1.or)(cond, (0, codegen_1.not)(isOwnProperty(gen, data, property))) : cond;\n}\n\nexports.noPropertyInData = noPropertyInData;\n\nfunction allSchemaProperties(schemaMap) {\n  return schemaMap ? Object.keys(schemaMap).filter(function (p) {\n    return p !== \"__proto__\";\n  }) : [];\n}\n\nexports.allSchemaProperties = allSchemaProperties;\n\nfunction schemaProperties(it, schemaMap) {\n  return allSchemaProperties(schemaMap).filter(function (p) {\n    return !(0, util_1.alwaysValidSchema)(it, schemaMap[p]);\n  });\n}\n\nexports.schemaProperties = schemaProperties;\n\nfunction callValidateCode(_ref2, func, context, passSchema) {\n  var schemaCode = _ref2.schemaCode,\n      data = _ref2.data,\n      _ref2$it = _ref2.it,\n      gen = _ref2$it.gen,\n      topSchemaRef = _ref2$it.topSchemaRef,\n      schemaPath = _ref2$it.schemaPath,\n      errorPath = _ref2$it.errorPath,\n      it = _ref2.it;\n  var dataAndSchema = passSchema ? (0, codegen_1._)(_templateObject8(), schemaCode, data, topSchemaRef, schemaPath) : data;\n  var valCxt = [[names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, errorPath)], [names_1.default.parentData, it.parentData], [names_1.default.parentDataProperty, it.parentDataProperty], [names_1.default.rootData, names_1.default.rootData]];\n  if (it.opts.dynamicRef) valCxt.push([names_1.default.dynamicAnchors, names_1.default.dynamicAnchors]);\n  var args = (0, codegen_1._)(_templateObject9(), dataAndSchema, gen.object.apply(gen, valCxt));\n  return context !== codegen_1.nil ? (0, codegen_1._)(_templateObject10(), func, context, args) : (0, codegen_1._)(_templateObject11(), func, args);\n}\n\nexports.callValidateCode = callValidateCode;\nvar newRegExp = (0, codegen_1._)(_templateObject12());\n\nfunction usePattern(_ref3, pattern) {\n  var gen = _ref3.gen,\n      opts = _ref3.it.opts;\n  var u = opts.unicodeRegExp ? \"u\" : \"\";\n  var regExp = opts.code.regExp;\n  var rx = regExp(pattern, u);\n  return gen.scopeValue(\"pattern\", {\n    key: rx.toString(),\n    ref: rx,\n    code: (0, codegen_1._)(_templateObject13(), regExp.code === \"new RegExp\" ? newRegExp : (0, util_2.useFunc)(gen, regExp), pattern, u)\n  });\n}\n\nexports.usePattern = usePattern;\n\nfunction validateArray(cxt) {\n  var gen = cxt.gen,\n      data = cxt.data,\n      keyword = cxt.keyword,\n      it = cxt.it;\n  var valid = gen.name(\"valid\");\n\n  if (it.allErrors) {\n    var validArr = gen.let(\"valid\", true);\n    validateItems(function () {\n      return gen.assign(validArr, false);\n    });\n    return validArr;\n  }\n\n  gen.var(valid, true);\n  validateItems(function () {\n    return gen.break();\n  });\n  return valid;\n\n  function validateItems(notValid) {\n    var len = gen.const(\"len\", (0, codegen_1._)(_templateObject14(), data));\n    gen.forRange(\"i\", 0, len, function (i) {\n      cxt.subschema({\n        keyword,\n        dataProp: i,\n        dataPropType: util_1.Type.Num\n      }, valid);\n      gen.if((0, codegen_1.not)(valid), notValid);\n    });\n  }\n}\n\nexports.validateArray = validateArray;\n\nfunction validateUnion(cxt) {\n  var gen = cxt.gen,\n      schema = cxt.schema,\n      keyword = cxt.keyword,\n      it = cxt.it;\n  /* istanbul ignore if */\n\n  if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\");\n  var alwaysValid = schema.some(function (sch) {\n    return (0, util_1.alwaysValidSchema)(it, sch);\n  });\n  if (alwaysValid && !it.opts.unevaluated) return;\n  var valid = gen.let(\"valid\", false);\n  var schValid = gen.name(\"_valid\");\n  gen.block(function () {\n    return schema.forEach(function (_sch, i) {\n      var schCxt = cxt.subschema({\n        keyword,\n        schemaProp: i,\n        compositeRule: true\n      }, schValid);\n      gen.assign(valid, (0, codegen_1._)(_templateObject15(), valid, schValid));\n      var merged = cxt.mergeValidEvaluated(schCxt, schValid); // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n      // or if all properties and items were evaluated (it.props === true && it.items === true)\n\n      if (!merged) gen.if((0, codegen_1.not)(valid));\n    });\n  });\n  cxt.result(valid, function () {\n    return cxt.reset();\n  }, function () {\n    return cxt.error(true);\n  });\n}\n\nexports.validateUnion = validateUnion;","map":{"version":3,"sources":["../../lib/vocabularies/code.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateUnion = exports.validateArray = exports.usePattern = exports.callValidateCode = exports.schemaProperties = exports.allSchemaProperties = exports.noPropertyInData = exports.propertyInData = exports.isOwnProperty = exports.hasPropFunc = exports.reportMissingProp = exports.checkMissingProp = exports.checkReportMissingProp = void 0;\nconst codegen_1 = require(\"../compile/codegen\");\nconst util_1 = require(\"../compile/util\");\nconst names_1 = require(\"../compile/names\");\nconst util_2 = require(\"../compile/util\");\nfunction checkReportMissingProp(cxt, prop) {\n    const { gen, data, it } = cxt;\n    gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n        cxt.setParams({ missingProperty: (0, codegen_1._) `${prop}` }, true);\n        cxt.error();\n    });\n}\nexports.checkReportMissingProp = checkReportMissingProp;\nfunction checkMissingProp({ gen, data, it: { opts } }, properties, missing) {\n    return (0, codegen_1.or)(...properties.map((prop) => (0, codegen_1.and)(noPropertyInData(gen, data, prop, opts.ownProperties), (0, codegen_1._) `${missing} = ${prop}`)));\n}\nexports.checkMissingProp = checkMissingProp;\nfunction reportMissingProp(cxt, missing) {\n    cxt.setParams({ missingProperty: missing }, true);\n    cxt.error();\n}\nexports.reportMissingProp = reportMissingProp;\nfunction hasPropFunc(gen) {\n    return gen.scopeValue(\"func\", {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        ref: Object.prototype.hasOwnProperty,\n        code: (0, codegen_1._) `Object.prototype.hasOwnProperty`,\n    });\n}\nexports.hasPropFunc = hasPropFunc;\nfunction isOwnProperty(gen, data, property) {\n    return (0, codegen_1._) `${hasPropFunc(gen)}.call(${data}, ${property})`;\n}\nexports.isOwnProperty = isOwnProperty;\nfunction propertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} !== undefined`;\n    return ownProperties ? (0, codegen_1._) `${cond} && ${isOwnProperty(gen, data, property)}` : cond;\n}\nexports.propertyInData = propertyInData;\nfunction noPropertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} === undefined`;\n    return ownProperties ? (0, codegen_1.or)(cond, (0, codegen_1.not)(isOwnProperty(gen, data, property))) : cond;\n}\nexports.noPropertyInData = noPropertyInData;\nfunction allSchemaProperties(schemaMap) {\n    return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : [];\n}\nexports.allSchemaProperties = allSchemaProperties;\nfunction schemaProperties(it, schemaMap) {\n    return allSchemaProperties(schemaMap).filter((p) => !(0, util_1.alwaysValidSchema)(it, schemaMap[p]));\n}\nexports.schemaProperties = schemaProperties;\nfunction callValidateCode({ schemaCode, data, it: { gen, topSchemaRef, schemaPath, errorPath }, it }, func, context, passSchema) {\n    const dataAndSchema = passSchema ? (0, codegen_1._) `${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data;\n    const valCxt = [\n        [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, errorPath)],\n        [names_1.default.parentData, it.parentData],\n        [names_1.default.parentDataProperty, it.parentDataProperty],\n        [names_1.default.rootData, names_1.default.rootData],\n    ];\n    if (it.opts.dynamicRef)\n        valCxt.push([names_1.default.dynamicAnchors, names_1.default.dynamicAnchors]);\n    const args = (0, codegen_1._) `${dataAndSchema}, ${gen.object(...valCxt)}`;\n    return context !== codegen_1.nil ? (0, codegen_1._) `${func}.call(${context}, ${args})` : (0, codegen_1._) `${func}(${args})`;\n}\nexports.callValidateCode = callValidateCode;\nconst newRegExp = (0, codegen_1._) `new RegExp`;\nfunction usePattern({ gen, it: { opts } }, pattern) {\n    const u = opts.unicodeRegExp ? \"u\" : \"\";\n    const { regExp } = opts.code;\n    const rx = regExp(pattern, u);\n    return gen.scopeValue(\"pattern\", {\n        key: rx.toString(),\n        ref: rx,\n        code: (0, codegen_1._) `${regExp.code === \"new RegExp\" ? newRegExp : (0, util_2.useFunc)(gen, regExp)}(${pattern}, ${u})`,\n    });\n}\nexports.usePattern = usePattern;\nfunction validateArray(cxt) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    if (it.allErrors) {\n        const validArr = gen.let(\"valid\", true);\n        validateItems(() => gen.assign(validArr, false));\n        return validArr;\n    }\n    gen.var(valid, true);\n    validateItems(() => gen.break());\n    return valid;\n    function validateItems(notValid) {\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        gen.forRange(\"i\", 0, len, (i) => {\n            cxt.subschema({\n                keyword,\n                dataProp: i,\n                dataPropType: util_1.Type.Num,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), notValid);\n        });\n    }\n}\nexports.validateArray = validateArray;\nfunction validateUnion(cxt) {\n    const { gen, schema, keyword, it } = cxt;\n    /* istanbul ignore if */\n    if (!Array.isArray(schema))\n        throw new Error(\"ajv implementation error\");\n    const alwaysValid = schema.some((sch) => (0, util_1.alwaysValidSchema)(it, sch));\n    if (alwaysValid && !it.opts.unevaluated)\n        return;\n    const valid = gen.let(\"valid\", false);\n    const schValid = gen.name(\"_valid\");\n    gen.block(() => schema.forEach((_sch, i) => {\n        const schCxt = cxt.subschema({\n            keyword,\n            schemaProp: i,\n            compositeRule: true,\n        }, schValid);\n        gen.assign(valid, (0, codegen_1._) `${valid} || ${schValid}`);\n        const merged = cxt.mergeValidEvaluated(schCxt, schValid);\n        // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n        // or if all properties and items were evaluated (it.props === true && it.items === true)\n        if (!merged)\n            gen.if((0, codegen_1.not)(valid));\n    }));\n    cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n}\nexports.validateUnion = validateUnion;\n//# sourceMappingURL=code.js.map"]},"metadata":{},"sourceType":"script"}
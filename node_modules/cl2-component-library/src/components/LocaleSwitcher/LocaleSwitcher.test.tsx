import React from 'react';
import { render, screen, fireEvent } from '../../utils/testUtils/rtl';
import LocaleSwitcher from '.';

describe('<LocaleSwitcher />', () => {
  it('renders', () => {
    const handleOnSelectedLocaleChange = jest.fn();

    render(
      <LocaleSwitcher
        locales={['en-GB', 'nl-BE']}
        selectedLocale={'en-GB'}
        onSelectedLocaleChange={handleOnSelectedLocaleChange}
      />
    );
    expect(screen.getByText('en-GB')).toBeInTheDocument();
    expect(screen.getByText('nl-BE')).toBeInTheDocument();
  });

  it('calls onSelectedLocaleChange when clicking on another locale', () => {
    const handleOnSelectedLocaleChange = jest.fn();

    render(
      <LocaleSwitcher
        locales={['en-GB', 'nl-BE']}
        selectedLocale={'en-GB'}
        onSelectedLocaleChange={handleOnSelectedLocaleChange}
      />
    );

    fireEvent.click(screen.getByText('nl-BE'));

    expect(handleOnSelectedLocaleChange).toHaveBeenCalledWith('nl-BE');
  });

  it('does not call onSelectedLocaleChange when clicking the selected locale', () => {
    const handleOnSelectedLocaleChange = jest.fn();

    render(
      <LocaleSwitcher
        locales={['en-GB', 'nl-BE']}
        selectedLocale={'en-GB'}
        onSelectedLocaleChange={handleOnSelectedLocaleChange}
      />
    );

    fireEvent.click(screen.getByText('en-GB'));

    expect(handleOnSelectedLocaleChange).not.toHaveBeenCalled();
  });
});

import { viewportWidths } from '../utils/styleUtils';

import { useState, useEffect } from 'react';

const mediaQueries = {
  smallPhone: `(max-width: ${viewportWidths.smallPhone})`,
  phone: `(max-width: ${viewportWidths.phone}px)`,
  largePhone: `(max-width: ${viewportWidths.largePhone}px)`,
  smallTablet: `(max-width: ${viewportWidths.smallTablet}px)`,
  largeTablet: `(max-width: ${viewportWidths.largeTablet}px)`,
};

type BreakpointType = keyof typeof mediaQueries;

const useBreakpoint = (breakpointType: BreakpointType) => {
  const [breakpoint, setBreakpoint] = useState(
    window.matchMedia(mediaQueries[breakpointType]).matches
  );

  useEffect(() => {
    const media = window.matchMedia(mediaQueries[breakpointType]);
    if (media.matches !== breakpoint) {
      setBreakpoint(media.matches);
    }

    const listener = () => setBreakpoint(media.matches);
    media.addEventListener('change', listener);

    return () => media.removeEventListener('change', listener);
  }, [breakpointType, breakpoint]);

  return breakpoint;
};

export default useBreakpoint;
